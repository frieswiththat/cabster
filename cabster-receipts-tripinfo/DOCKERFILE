FROM python:3.8-alpine

WORKDIR /app

COPY ./src /app

RUN pip install -r requirements.txt

ARG INGEST_QUEUE
ENV INGEST_QUEUE=${INGEST_QUEUE}
ARG OUT_QUEUE
ENV OUT_QUEUE=${OUT_QUEUE}
ENV INGEST_QUEUE=${INGEST_QUEUE}
ARG DATABASE_SECRET
ENV DATABASE_SECRET=${DATABASE_SECRET}
ARG POSTGRES_HOST
ENV POSTGRES_HOST=${DATAPOSTGRES_HOSTBASE_SECRET}

ENTRYPOINT python sqs_ingest.py